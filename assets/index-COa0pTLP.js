(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const t of s)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const t={};return s.integrity&&(t.integrity=s.integrity),s.referrerPolicy&&(t.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?t.credentials="include":s.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(s){if(s.ep)return;s.ep=!0;const t=i(s);fetch(s.href,t)}})();class o{constructor(e){this.form=document.querySelector(e),this.emailInput=this.form.querySelector("#email"),this.errorMessage=this.form.querySelector('[data-field="email"]'),this.indicator=this.form.querySelector(".progress-indicator"),this.circles=this.indicator.getElementsByTagName("span"),this.successDialog=document.querySelector(".card__success"),this.card=document.querySelector(`.card:has(${e})`),this.dismiss=document.getElementById("dismiss"),this.timer=null,this.isDesktop=window.matchMedia("(min-width: 57.5rem)"),this.isValid=!1,this.emailRegExp=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,this.init()}init(){this.form.addEventListener("submit",e=>this.handleSubmit(e)),this.emailInput.addEventListener("input",()=>this.handleInput()),this.dismiss.addEventListener("click",e=>{this.resetForm()})}handleSubmit(e){e.preventDefault(),this.validateEmail(),this.isValid?this.showSuccess():this.showError()}handleInput(){clearTimeout(this.timer),this.clearError(),this.toggleIndicator(!0),this.emailInput.classList.remove("valid","invalid"),this.timer=setTimeout(()=>{this.validateEmail()},1050)}validateEmail(){const e=this.emailInput.value.trim();e?this.emailRegExp.test(e)?(this.clearError(),this.isValid=!0):(this.showError("Valid email required"),this.isValid=!1):(this.showError("Email field is empty!"),this.isValid=!1),this.update(),this.toggleIndicator(!1)}update(){this.emailInput.classList.toggle("valid",this.isValid),this.emailInput.classList.toggle("invalid",!this.isValid)}async showError(e){this.errorMessage.classList.contains("hidden")||(this.errorMessage.classList.add("animate:wiggle"),await this.delay(500),this.errorMessage.classList.remove("animate:wiggle")),e&&(this.errorMessage.textContent=e),this.errorMessage.classList.remove("hidden")}clearError(){this.errorMessage.classList.add("hidden")}async showSuccess(){let e=this.isDesktop?850:425;this.clearError(),this.successDialog.querySelector("span").textContent=this.emailInput.value,this.card.classList.add("animate:zoom"),document.querySelector("body").classList.add("overflow"),await this.delay(e),this.card.style.display="none",this.successDialog.style.display="flex",this.successDialog.classList.add("subscribed"),this.successDialog.ariaExpanded=!0,this.successDialog.showModal()}toggleIndicator(e){for(let i of this.circles)e?i.classList.add("animate:progress"):i.classList.remove("animate:progress")}resetForm(){this.form.reset(),this.emailInput.classList.remove("valid"),this.isValid=!1,this.successDialog.classList.remove("subscribed"),this.successDialog.ariaExpanded=!1,this.successDialog.classList.add("subscribed--reset"),this.successDialog.close(),this.successDialog.addEventListener("animationend",async()=>{this.successDialog.classList.remove("subscribed--reset"),this.successDialog.style.display="none",this.card.classList.replace("animate:zoom","card--reset"),this.card.style.display="flex",this.card.style.animationPlayState="running",console.log("delay starting"),await this.delay(1e3),console.log("delay finished."),document.querySelector("body").classList.remove("overflow"),this.card.classList.remove("card--reset")},{once:!0})}delay(e){return new Promise(i=>setTimeout(i,e))}}document.addEventListener("DOMContentLoaded",()=>{new o("#newsletter-form"),(async()=>(await loadStarsPreset(tsParticles),await tsParticles.load({id:"stars",options:{background:{color:"#36384D"},preset:"stars"}})))()});
